(function(k){var A=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),t=function(a,c){var b=0,d=a.length,e=function(){var f=(new Date).getTime(),g=a[b];f-c>=g[0]&&(g[1](f,b),c=f,b++);b<d&&requestAnimationFrame(e)};requestAnimationFrame(e)},p=function(a){a:{var c=document.styleSheets,b,d,e;d=0;for(e=c.length;d<e;d++){b=c[d];b=b.rules||b.cssRules;for(var f=0;f<b.length;f++)if(b[f].selectorText==
"."+a){a=b[f].cssText||b[f].style.cssText;break a}}a=""}a=a.match(/(\d*\.?\d+)(m?s)/g);e=[];if(!a)return null;c=0;for(d=a.length;c<d;c++)b=parseFloat(a[c]),-1==a[c].indexOf("ms")&&(b*=1E3),e.push(b);if(!e.length)return null;e.sort();return e.pop()},B=function(a,c){var b=[],d,e,f,g;d=0;for(e=a.length;d<e;d++)g=a[d],f=p(g),b.push([null===f?c:f,g]);return b},C=function(a){var c=0,b,d;b=0;for(d=a.length;b<d;b++)c+=a[b][0];return c};k.fn.riverdance=function(a){a=a||{};this.each(function(){var c=this,b=
a.text||c.innerText||c.textContent,d=0,e=b.length,f,g,D=a.speed||30,r=a.cls,v=(r?p(r):null)||a.stepDuration||200,m=a.stages?B(a.stages,v):null,w=m?C(m):v,l,u=a.hideBefore||!1,s=a.hideAfter||!1,n=a.loop||!1,E=a.loopDelay||null,F=function(a,d,e){return function(){var h=document.createTextNode(b[a]);h.nodeValue=b[a];u||(g.nodeValue=g.nodeValue.substr(1));c.insertBefore(h,g);t([[0,function(){}],[w,function(){s||(f.nodeValue+=h.innerText||h.textContent);c.removeChild(h);e&&e()}]],d)}},G=function(a,d,e){return function(){var h=
document.createElement("span"),k=[],l=0,q,n,p=function(){s||(f.nodeValue+=h.innerText||h.textContent);c.removeChild(h);e&&e()};h.style.display="inline-block";h.style.fontSize="inherit";h.style.lineHeight="inherit";h.className=r;h.innerHTML=b[a];u||(g.nodeValue=g.nodeValue.substr(1));c.insertBefore(h,g);if(m){q=0;for(n=m.length;q<n;q++)k.push([l,function(a){return function(){h.className=r+" "+a}}(m[q][1])]),l=m[q][0];k.push([l,p]);t(k,d)}else t([[w,p]],d)}},y=function(){c.innerHTML=s?"\u200c":b;a.allCls&&
k(c).removeClass(a.allCls);a.callback&&a.callback();n&&(window.setTimeout(x,E||0),!0!==n&&n--)},z=function(){var a=(new Date).getTime();a-l>=D&&(A(b[d])?G(d,a,d==e-1?y:null)():F(d,a,d==e-1?y:null)(),d++,l=a);d<e&&requestAnimationFrame(z)},x=function(){for(a.allCls&&k(c).addClass(a.allCls);c.firstChild;)c.removeChild(c.firstChild);f=document.createTextNode("");g=document.createTextNode(b);l=(new Date).getTime();d=0;s||c.appendChild(f);u&&(g.nodeValue="\u200c");c.appendChild(g);requestAnimationFrame(z)};
x()});return this}})(jQuery);
