(function(z){var E=1,F=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),A=function(a,c,b){var d=0,e=a.length,f=function(){if(b()){var g=(new Date).getTime(),u=a[d];g-c>=u[0]&&(u[1](g,d),c=g,d++);d<e&&requestAnimationFrame(f)}};requestAnimationFrame(f)},p=function(a){a:{var c=document.styleSheets,b,d,e;d=0;for(e=c.length;d<e;d++){b=c[d];b=b.rules||b.cssRules;for(var f=0;f<
b.length;f++)if(b[f].selectorText=="."+a){a=b[f].cssText||b[f].style.cssText;break a}}a=""}a=a.match(/(\d*\.?\d+)(m?s)/g);e=[];if(!a)return null;c=0;for(d=a.length;c<d;c++)b=parseFloat(a[c]),-1==a[c].indexOf("ms")&&(b*=1E3),e.push(b);if(!e.length)return null;e.sort();return e.pop()},w=function(a,c){var b=[],d,e,f,g;d=0;for(e=a.length;d<e;d++)g=a[d],f=p(g),b.push([null===f?c:f,g]);return b},x=function(a){var c=0,b,d;b=0;for(d=a.length;b<d;b++)c+=a[b][0];return c};z.fn.riverdance=function(a){var c=
"stop"==a;a=c?{}:a||{};var b=a.speed||30,d=a.cls,e=a.hideBefore||!1,f=a.hideAfter||!1,g=a.loop||!1,u=a.loopDelay||null,q=(d?p(d):null)||a.stepDuration||200,t=a.stages?w(a.stages,q):null,G=t?x(t):q;this.each(function(){var h=this,k=z(h),n=a.text||h.innerText||h.textContent,l=0,p=n.length,m=a.reverse||!1,q=E++,r,s,y,v=function(){return k.data("riverdance")===q},w=function(a){var b,c=n[a];F(c)||(c="&nbsp;");b=document.createElement("span");b.innerHTML=c;b.style.display="inline-block";b.style.fontSize=
"inherit";b.style.lineHeight="inherit";b.className=d;e||(m?r.nodeValue=n.substring(0,a):s.nodeValue=s.nodeValue.substr(1));m?h.insertBefore(b,r.nextSibling):h.insertBefore(b,s);return b},x=function(a,b,c){return function(){var e=w(a),g=[],l=0,k,p,q=function(){e&&e.parentNode===h&&h.removeChild(e);f||(m?s.nodeValue=n.substr(a):r.nodeValue+=n[a]);c&&c()};if(t){k=0;for(p=t.length;k<p;k++)g.push([l,function(a){return function(){e.className=d+" "+a}}(t[k][1])]),l=t[k][0];g.push([l,q]);A(g,b,v)}else A([[G,
q]],b,v)}},H=function(){v()?(h.innerHTML=f?"\u200c":n,a.allCls&&k.removeClass(a.allCls),a.callback&&a.callback(),g&&(a.loopReverse&&(m=!m),window.setTimeout(B,u||0),!0!==g&&g--)):C()},C=function(){k.data("riverdance")||(h.innerHTML=f?"\u200c":n,a.callback&&a.callback());a.allCls&&k.removeClass(a.allCls)},D=function(){if(v()){var a=(new Date).getTime(),c=m?0==l:l==p-1,d=m?0>l:l>=p;a-y>=b&&(x(l,a,c?H:null)(),l+=m?-1:1,y=a);d||requestAnimationFrame(D)}else C()},B=function(){for(a.allCls&&k.addClass(a.allCls);h.firstChild;)h.removeChild(h.firstChild);
r=document.createTextNode(m?n:"");s=document.createTextNode(m?"":n);y=(new Date).getTime();l=m?n.length-1:0;e&&(m?r.nodeValue="\u200c":s.nodeValue="\u200c");h.appendChild(r);h.appendChild(s);requestAnimationFrame(D)};c?k.data("riverdance",null):(k.data("riverdance",q),B())});return this}})(jQuery);
